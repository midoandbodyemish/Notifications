<!DOCTYPE html><html lang="ar">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>تطبيقك مع إشعارات Firebase</title><!-- تحميل أحدث مكتبات Firebase -->
<script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.11.1/firebase-app.js";
    import { getMessaging, getToken, onMessage } from "https://www.gstatic.com/firebasejs/10.11.1/firebase-messaging.js";
    
    // تهيئة Firebase
    const firebaseConfig = {
        apiKey: "AIzaSyAJzK9G2MJieXHmeeHUBdULdDt8NwyxyKQ",
        authDomain: "khedma-fd534.firebaseapp.com",
        projectId: "khedma-fd534",
        storageBucket: "khedma-fd534.appspot.com",
        messagingSenderId: "186556101962",
        appId: "1:186556101962:web:3edb278b50948378f83db3",
        measurementId: "G-F6C0180ZDS"
    };
    
    const app = initializeApp(firebaseConfig);
    const messaging = getMessaging(app);
    console.log("✅ Firebase تم الاتصال بها بنجاح");

    document.getElementById("notifyBtn").addEventListener("click", () => {
        Notification.requestPermission().then(permission => {
            if (permission === "granted") {
                getToken(messaging, { vapidKey: "YOUR_VAPID_KEY" }).then(token => {
                    console.log("🔑 Token:", token);
                    document.getElementById("status").innerText = "تم تفعيل الإشعارات!";
                }).catch(err => {
                    console.error("خطأ في الحصول على التوكن", err);
                });
            } else {
                document.getElementById("status").innerText = "تم رفض الإشعارات!";
            }
        });
    });

    // استقبال الإشعارات أثناء عمل الموقع
    onMessage(messaging, (payload) => {
        console.log("📩 إشعار وارد: ", payload);
        alert(`إشعار جديد: ${payload.notification.title}\n${payload.notification.body}`);
    });
</script>

<style>
    body {
        font-family: Arial, sans-serif;
        text-align: center;
        background-color: #f8f9fa;
        padding: 20px;
    }
    .container {
        margin-top: 50px;
        background: white;
        padding: 20px;
        border-radius: 10px;
        box-shadow: 0px 0px 10px rgba(0, 0, 0, 0.1);
    }
    button {
        background: #007bff;
        color: white;
        border: none;
        padding: 10px 20px;
        font-size: 16px;
        cursor: pointer;
        border-radius: 5px;
        transition: 0.3s;
    }
    button:hover {
        background: #0056b3;
    }
</style>

</head>
<body>
    <div class="container">
        <h1>مرحبًا بك في تطبيقك</h1>
        <p>اضغط على الزر لتفعيل الإشعارات</p>
        <button id="notifyBtn">تفعيل الإشعارات</button>
        <p id="status"></p>
    </div>
</body>
</html>
